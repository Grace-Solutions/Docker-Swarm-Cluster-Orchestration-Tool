{
  "globalSettings": {
    "clusterName": "docker-swarm-0001",
    "overlayProvider": "netbird",
    "overlayConfig": "--setup-key 'your-netbird-setup-key-here' --allow-server-ssh --enable-ssh-remote-port-forwarding --enable-ssh-sftp --enable-ssh-root",
    "setRootPassword": "",
    "sshKeyType": "ed25519",
    "serviceDefinitionDirectory": "",
    "removeSSHPublicKeyOnCompletion": false,
    "distributedStorage": {
      "enabled": true,
      "provider": "microceph",
      "forceRecreation": true,
      "poolName": "docker-swarm-0001",
      "eligibleDisks": {
        "inclusionExpression": ["^/dev/sd[b-z]$", "^/dev/nvme[0-9]n1$"],
        "exclusionExpression": ["^/dev/sda$", "^/dev/vda$"]
      },
      "providers": {
        "microceph": {
          "snapChannel": "reef/stable",
          "enableUpdates": false,
          "mountPath": "/mnt/MicroCephFS/docker-swarm-0001",
          "allowLoopDevices": true,
          "loopDeviceDirectory": "/mnt/MicroCephFS/LoopDevices",
          "loopDeviceSizeGB": 16,
          "loopDeviceThinProvision": true,
          "enableRadosGateway": true,
          "radosGatewayPort": 7480,
          "radosGatewayMultisite": true,
          "s3BucketName": "docker-swarm-0001",
          "s3CredentialsFile": "/mnt/MicroCephFS/docker-swarm-0001/secrets/s3-credentials.json"
        }
      }
    },
    "decommissioning": {
      "enabled": false,
      "disconnectOverlays": false,
      "removeStorage": false,
      "removeDockerSwarm": true
    },
    "keepalived": {
      "enabled": false,
      "vip": "auto",
      "interface": "auto",
      "routerId": "auto",
      "authPass": "auto",
      "vipScanTimeout": 60
    },
    "preScripts": [
      {
        "enabled": false,
        "continueOnError": false,
        "name": "manager-pre-check",
        "source": "https://example.com/scripts/manager-pre-check.sh",
        "parameters": "--verbose",
        "conditions": [
          { "property": "role", "operator": "=", "value": "tester", "negate": false }
        ]
      }
    ],
    "postScripts": [
      {
        "enabled": false,
        "continueOnError": true,
        "name": "worker-post-setup",
        "source": "https://example.com/scripts/worker-post-setup.sh",
        "parameters": "--environment production",
        "conditions": [
          { "property": "role", "operator": "=", "value": "tester", "negate": false },
          { "property": "label.environment", "operator": "=", "value": "tester", "negate": false }
        ]
      }
    ]
  },
  "nodes": [
    {
      "enabled": true,
      "sshFQDNorIP": "manager1.example.com",
      "sshPort": 22,
      "newHostname": "swarm-manager-01",
      "username": "root",
      "password": "",
      "privateKeyPath": "",
      "privateKeyPassword": "",
      "useSSHAutomaticKeyPair": false,
      "role": "manager",
      "rebootOnCompletion": false,
      "storageEnabled": true,
      "scriptsEnabled": true,
      "keepalived": { "enabled": true, "priority": "auto", "state": "auto" },
      "labels": { "environment": "production", "region": "us-east-1", "tier": "control-plane", "EdgeLoadBalancer": "true" },
      "managementPanel": {
        "enabled": true,
        "type": "webmin"
      },
      "firewall": {
        "configurationEnabled": true,
        "profiles": [
          { "enabled": true, "name": "BlockAllPublic" },
          { "enabled": true, "name": "AllowAllPrivate" },
          { "enabled": true, "name": "Harden" }
        ],
        "ports": [
          {
            "enabled": true,
            "protocol": ["TCP"],
            "rangeList": [80, 443],
            "sources": ["0.0.0.0/0"],
            "action": "ACCEPT",
            "comment": "Allow HTTP/HTTPS from anywhere"
          },
          {
            "enabled": true,
            "protocol": ["TCP", "UDP"],
            "rangeList": ["4500-6500"],
            "sources": ["private", "cgnat"],
            "action": "ACCEPT",
            "comment": "Allow custom ports from private networks only"
          }
        ]
      }
    },
    {
      "enabled": true,
      "sshFQDNorIP": "worker1.example.com",
      "sshPort": 22,
      "newHostname": "swarm-worker-01",
      "username": "root",
      "password": "",
      "privateKeyPath": "",
      "privateKeyPassword": "",
      "useSSHAutomaticKeyPair": false,
      "role": "worker",
      "rebootOnCompletion": false,
      "storageEnabled": true,
      "scriptsEnabled": true,
      "keepalived": { "enabled": true, "priority": "auto", "state": "auto" },
      "labels": { "environment": "production", "region": "us-east-1", "tier": "data-plane", "EdgeLoadBalancer": "true" }
    }
  ]
}
